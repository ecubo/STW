function initApp(){function e(){$("#iconMore").fadeOut(300),$("header").removeClass("active"),$("#main, header h2, header #iconMenu").removeClass("active")}function t(){$("#main, header h2, header #iconMenu").addClass("active"),$("a#enter").css({opacity:0})}function a(e){var t="data:image/jpeg;base64,"+e;$("#favoritePicture").css("background-image","url("+t+")")}function o(e){urlImagen=n(e,function(e){$("#favoritePicture").css("background-image","url("+e.data+")")},function(){})}function r(){}function n(e,t,a){var o,i,r,n=new Image;n.onload=function(){i=document.createElement("canvas"),i.width=n.width,i.height=n.height,r=i.getContext("2d"),r.drawImage(n,0,0);try{o=i.toDataURL("image/jpeg",.15),t({image:n,data:o})}catch(e){a(e)}};try{n.src=e}catch(c){a(c)}}function c(e){latitud=e.coords.latitude,longitud=e.coords.longitude,window.open("https://www.google.com/maps/d/viewer?mid=zwdcHPVPf2dU.kAi8yY7NbFx4&z=12&ll="+latitud+","+longitud,"_blank","location=no")}function l(){checkConnection()?(latitud=40.474581,longitud=-3.676149,window.open("https://www.google.com/maps/d/viewer?mid=zwdcHPVPf2dU.kAi8yY7NbFx4&z=12&ll="+latitud+","+longitud,"_blank","location=no")):noConnection()}FastClick.attach(document.body),"iPad"==navigator.platform||"iPhone"==navigator.platform||"iPod"==navigator.platform?(soperativo="ios",$("body").attr("data-so","ios")):(soperativo="android",$("body").attr("data-so","android"),document.addEventListener("backbutton",function(e){e.preventDefault()},!0),$("#fromCurrencyNumber").bind("keypress",function(e){13==e.keyCode&&(e.preventDefault(),$("#fromCurrencyNumber").trigger("change"))})),$("a#enter").on("click",function(e){return scrollDisable=!1,e.preventDefault(),t(),$("#iconMenu").fadeIn(300),!1}),$("select").on("click",function(e){e.preventDefault(),$(this).trigger("touchstart")}),$("header").on("click","#iconMenu:not(.edit)",function(e){e.preventDefault(),$("header").toggleClass("active")}),$("header").on("click","#iconMenu.edit",function(e){e.preventDefault(),$("#removeFavorite").removeClass("edit"),$(this).removeClass("edit"),$("#iconMenu").attr("src","img/iconMenu.svg"),$("#iconMore").removeClass("active"),$("#iconMore").attr("src","img/iconMore.svg"),$("#favoritesEvent").fadeOut(300),$(".listFavorites").fadeIn(300),$("#favoritePicture").css({"background-image":""}),$("#inputFavorite").val("")}),$("#menu").on("click","#categories:not(.active)",function(a){a.preventDefault(),e(),$("#iconMore").removeClass(),document.addEventListener("backbutton",function(e){e.preventDefault(),e.stopPropagation()},!0),setTimeout(function(){$("#main").removeClass(),$("#main").addClass("categories"),$("#main").html(htmlCategories),$("#iconMore").removeClass("edit"),$("h2").text("es"==idioma?"Categorías":"Choose Category"),$("header #menu ul li").removeClass("active"),$("#categories").addClass("active"),$("#main.categories").css({"background-image":"url(img/catalogo.png)"}),t()},500)}),$("#main").on("click",".btnCategory",function(e){e.preventDefault(),document.addEventListener("backbutton",function(e){e.preventDefault(),e.stopPropagation(),$("#iconMore.back").trigger("click")},!0),currentCat=$(this);var t="url(img/catalogo"+$(this).attr("id")+".png)",a=t+", url(img/estante"+$(this).attr("id")+".png)";TweenMax.to("#contenedor",1,{marginLeft:"-100%",ease:Back.easeIn.config(1.4)}),TweenMax.to("#bkImage",1,{backgroundImage:t,opacity:1}),TweenMax.to("#contentSubcategoryList",1,{backgroundImage:a}),$("#contenedor").addClass("active"),$("header").removeClass("active");var o=$(this),r=$(this).attr("id");currentTitle=$(this).attr("data-category");var n=$(this).find("img").attr("src");$(".dummy").css("background-image","url("+n+")"),$("h2").fadeOut(300,function(){$("h2").text(currentTitle),$("h2").fadeIn(300)}),$("#categoriesList, #subcategories").addClass("active"),$("#iconMore").attr("src","img/iconBack2.png"),$("#iconMore").fadeIn(300).addClass("back");{var c=new Array;new Array}$.each(listaProductos.subcategorias,function(e,t){t.id_categoria==o.data("array")&&c.push("es"==idioma?{nombre:t.nombre,id:t.id}:{nombre:t.nombre_eng,id:t.id})}),borderColor=o.data("color"),$("#selectProducts").css({"background-image":"url(img/category/arrows"+o.data("array")+".png)","border-color":borderColor});var l="",s='<option value="'+c[0].id+'" selected="">'+capitalize(c[0].nombre)+"</option>";for(i=0;i<c.length;i++)l+='<div role="button" class="btnSubCategory" data-subcategory="'+c[i].id+'" data-category="'+capitalize(c[i].nombre)+'"><img class="nonactive" src="img/subcategory/'+c[i].id+'.png" alt=""></div>',s+='<option value="'+c[i].id+'">'+capitalize(c[i].nombre)+"</option>";switch($("#selectSubcategories").html(s),$("#contentSubcategoryList").html(l),colorBefore="",r){case"restaurant":colorBefore="#00baff";break;case"toys":colorBefore="#ed686e";break;case"electronic":colorBefore="#ff9e01";break;case"clothes":colorBefore="#9c59b5";break;case"sports":colorBefore="#edc211";break;case"travel":colorBefore="#465766";break;case"baby":colorBefore="#00d8c7";break;case"drugstore":colorBefore="#00699a";break;case"food":colorBefore="#b4b831"}$(".btnSubCategory").attr("data-colorbefore","#ffffff"),$(".btnSubCategory").css("color","#ffffff"),$(".btnSubCategory.active").attr("data-colorbefore",colorBefore),$(".btnSubCategory.active").css("color",function(){return $(this).data("colorbefore")}),$("#selectSubcategories").trigger("change")}),$("#main").on("click",".btnSubCategory:not(.active)",function(e){e.preventDefault(),document.addEventListener("backbutton",function(e){e.preventDefault(),e.stopPropagation(),$("#iconMore.back4").trigger("click")},!0),$("#iconMore").removeClass("back"),$("#iconMore").addClass("back4");var t=$(this).attr("data-subcategory");$("#selectSubcategories").val(t),$("#selectSubcategories").trigger("change"),currentTitle=$(this).attr("data-category"),$("h2").fadeOut(300,function(){$("h2").text(currentTitle),$("h2").fadeIn(300)}),$(".btnSubCategory").attr("data-colorbefore","#ffffff"),$(".btnSubCategory").css("color","#ffffff"),$(".btnSubCategory.active").attr("data-colorbefore",colorBefore),$(".btnSubCategory.active").css("color",function(){return $(this).data("colorbefore")});var a=$(this).data("subcategory");$("#selectSubcategories").val(a),TweenMax.to("#contentSubcategoryList .btnSubCategory",1,{opacity:0});var o=$("#selectSubcategories").val(),r=new Array;$.each(listaProductos.productos,function(e,t){t.id_subcategoria==o&&r.push("es"==idioma?{id:t.id,tamano:t.tamano,color:t.color,nombre:t.nombre_producto}:{id:t.id,tamano:t.tamano,color:t.color,nombre:t.nombre_producto_eng})});var n="",c=$(".btnSubCategory").width();for(i=0;i<r.length;i++)n+='<div style="background-color:'+borderColor+";height:"+c+'px" role="button" class="btnSubCategory active" data-product="'+r[i].id+'" data-category="'+r[i].nombre+'" data-colorbefore="#ffffff" style="color: rgb(255, 255, 255);"><embed class="embedProducto" src="img/products/'+r[i].id+'.svg" type="image/svg+xml" width="280" height="280" ><div class="mask"></div></div>';setTimeout(function(){$("#contentSubcategoryList").html(n),$(".btnSubCategory").addClass("producto")},1e3),TweenMax.to("#contentSubcategoryList .btnSubCategory",1,{opacity:1,delay:1.2})}),$("#main").on("click",".btnSubCategory.producto",function(e){e.preventDefault(),$("#iconMore").removeClass("back4"),document.addEventListener("backbutton",function(e){e.preventDefault(),e.stopPropagation(),$("#iconMore.back2").trigger("click")},!0);var t=$(this).attr("data-product");$("#selectProducts").val(t),$("#selectProducts").trigger("change")}),$("#main").on("change","#selectSubcategories",function(e){e.preventDefault();var t=$(this).val(),a=new Array;if($.each(listaProductos.productos,function(e,o){o.id_subcategoria==t&&a.push("es"==idioma?{id:o.id,tamano:o.tamano,color:o.color,nombre:o.nombre_producto}:{id:o.id,tamano:o.tamano,color:o.color,nombre:o.nombre_producto_eng})}),"es"==idioma)var o='<option value="seleccionar" selected="" disabled>Seleccionar Producto</option>';else var o='<option value="seleccionar" selected="" disabled>Select Product</option>';for(i=0;i<a.length;i++)o+='<option value="'+a[i].id+'" data-color="'+a[i].color+'" data-size="'+a[i].tamano+'">'+capitalize(a[i].nombre)+"</option>";$("#selectProducts").html(o)}),$("#main").on("change","#selectProducts",function(e){e.preventDefault(),TweenMax.to("#contenedor",1,{marginLeft:"-200%",ease:Back.easeIn.config(1.4)}),TweenMax.to("#bkImage, #contentSubcategoryList",1,{opacity:0}),$("#contenedor").addClass("active2");var t=$(this).find("option:selected").attr("data-color"),a=$(this).find("option:selected").attr("data-size");"0"!=a&&(a=a.split(","));var o=$(this).find("option:selected").val();$("h2").fadeOut(300,function(){$("h2").text($("#selectProducts").find("option:selected").text()),$("h2").fadeIn(300)}),$("#iconMore").removeClass("back back3").addClass("back2"),$("#main.categories").addClass("product"),$("#product").addClass("active");var i='<embed id="embed" src="img/products/'+o+'.svg" type="image/svg+xml" width="200" height="200" ><div id="cover"></div>';if(i+="0"!=t?listaColores:'<select style="visibility:hidden;"></select>',"0"!=a){i+='<select id="optTalla">';for(var r=0;r<a.length;r++){var n=a[r];switch(n){case"XS":n="X-Small (XS)";break;case"S":n="Small (S)";break;case"M":n="Medium (M)";break;case"L":n="Large (L)";break;case"XL":n="X-Large (XL)";break;case"XXL":n="XX-Large (XXL)"}i+='<option value="'+a[r]+'">'+n+"</option>"}i+="</select>"}else i+='<select style="visibility:hidden;"></select>';i+=done,i+=textSize,$("#product").html(i),$("#optTalla").trigger("change"),$("#embed").removeClass("active"),setTimeout(function(){$("#embed").addClass("active")},1e3)}),$("#main").on("change","#color",function(e){e.preventDefault();var t=$(this).find("option:selected").val();changeColor(t)}),$("#main").bind("change","#optTalla",function(e){e.preventDefault();var t=$("#optTalla").find("option:selected").text();$("#texSize").text(t)}),$("#main").on("click","#doneProduct",function(e){e.preventDefault(),$("#add2Favorite").show(),document.addEventListener("backbutton",function(e){e.preventDefault(),e.stopPropagation(),$("#iconMore.back3").trigger("click")},!0),$("#main").addClass("show"),$("#iconMore").removeClass("back back2 back3"),$("#iconMore").addClass("back3"),$("#texSize, #add2Favorite").addClass("active")}),$("header").on("click","#iconMore.back",function(e){e.preventDefault(),$("header").removeClass("active"),$("#categoriesList, #subcategories").removeClass("active"),$("#main.categories").css({"background-image":"url(img/catalogo.png)"}),TweenMax.to("#contenedor",1,{marginLeft:"0",ease:Back.easeIn.config(1.4)}),TweenMax.to("#bkImage",1,{opacity:0}),TweenMax.to("#contentSubcategoryList",1,{backgroundImage:""}),$("#contenedor").removeClass("active"),$("#iconMore").fadeOut(300).removeClass("back back2 back3"),$("h2").fadeOut(300,function(){$("h2").text("es"==idioma?"Categorías":"Choose Category"),$("h2").fadeIn(300)})}),$("header").on("click","#iconMore.back2",function(e){e.preventDefault(),TweenMax.to("#contenedor",1,{marginLeft:"-100%",ease:Back.easeIn.config(1.4)}),TweenMax.to("#bkImage, #contentSubcategoryList",1,{opacity:1}),$("#contenedor").removeClass("active2"),$("h2").fadeOut(300,function(){$("h2").text(currentTitle),$("h2").fadeIn(300)}),$("header").removeClass("active"),$("#iconMore").removeClass("back2 back3").addClass("back4"),setTimeout(function(){$("#main.categories").removeClass("product")},1e3),$("#product").removeClass("active")}),$("header").on("click","#iconMore.back3",function(e){e.preventDefault(),$("header").removeClass("active"),$("#main").removeClass("show"),$("#iconMore").addClass("back2"),$("#iconMore").removeClass("back3"),$("#texSize, #add2Favorite").removeClass("active")}),$("header").on("click","#iconMore.back4",function(e){e.preventDefault(),$("#subcategoryList").animate({scrollTop:0},200,"linear",function(){$("header").removeClass("active"),$("#main").removeClass("show"),$("#iconMore").addClass("back"),$("#iconMore").removeClass("back4"),TweenMax.to("#contentSubcategoryList .btnSubCategory",1,{opacity:0}),setTimeout(function(){currentCat.trigger("click")},1e3),TweenMax.to("#contentSubcategoryList .btnSubCategory",1,{opacity:1,delay:1.2})})}),$("#main").on("click","#add2Favorite",function(e){e.preventDefault(),$(this).fadeOut();var t=$("#embed").attr("src"),a=$("h2").text()+" "+$("#texSize").text(),o=$("#color").val();$("#color").val()||(o="#ffffff");var i=localStorage.getItem("misFavoritos"),r=htmlFavorites;numFav++;var n="";n+='<li class="miProductos" data-number="'+numFav+'"><div class="img" data-color="'+o+'" style="background-image:url('+t+')"></div><p>'+a+"</p></li>",$("#dummy").html(i),$("#dummy").append(n);var c=$("#dummy").html();localStorage.setItem("misFavoritos",c);var l=c;$("#dummy").html(r),$("#dummy .listFavorites ul").html(l),htmlFavorites=$("#dummy").html(),$("#favorites").trigger("click")}),$("#menu").on("click","#favorites:not(.active)",function(a){a.preventDefault(),e(),$("#iconMore").removeClass(),document.addEventListener("backbutton",function(e){e.preventDefault(),e.stopPropagation()},!0),setTimeout(function(){$("#iconMore").attr("src","img/iconMore.svg"),setTimeout(function(){$("#iconMore").fadeIn(300)},100),$("#main").removeClass(),$("#main").addClass("favorites"),$("#main").html(htmlFavorites),$("#favoritesEvent").hide(),$(".listFavorites").show(),$("#iconMore").removeClass("active back back2 back3"),$("h2").text("es"==idioma?"Galería Personal":"Personal Gallery"),$("header #menu ul li").removeClass("active"),$("#favorites").addClass("active"),t()},500)}),$("header").on("click","#iconMore:not(.active, .back, .back2, .back3, .back4)",function(e){e.preventDefault(),document.addEventListener("backbutton",function(e){e.preventDefault(),e.stopPropagation(),$("#removeFavorite").trigger("click")},!0),$("#takeCamera, #takeLibrary").show(),$("#main.favorites nav #embedFavorite, #main.favorites nav #coverEmbed").css({display:"none"}),$("#favoritePicture").show(),$("header").removeClass("active"),$(this).attr("src","img/iconSave.svg"),$("#removeFavorite").attr("src","img/iconBack.png"),$(this).addClass("active"),$("#favoritesEvent").fadeIn(300),$(".listFavorites").fadeOut(300)}),$("header").on("click","#iconMore.active",function(e){if(e.preventDefault(),$("header").removeClass("active"),$("#removeFavorite").hasClass("edit")||"none"==$("#favoritePicture").css("background-image"))if("none"==$("#favoritePicture").css("background-image"))navigator.notification.confirm(messageFavoritos,function(){},noFavoritos,["OK"]);else{$(this).attr("src","img/iconMore.svg"),$("#removeFavorite").removeClass("edit");var t=$("#favoritePicture").css("background-image"),a=$("#inputFavorite").val();$("#favoritePicture").css("background-image",""),$("#inputFavorite").val(""),$('.listFavorites li[data-number="'+favoritoActual+'"] div').css({"background-image":""+t}),$('.listFavorites li[data-number="'+favoritoActual+'"] p').text(a),$(this).removeClass("active"),htmlFavorites=$(".favorites").html();var o=$(".listFavorites ul").html();localStorage.setItem("misFavoritos",o),$("#iconMenu").removeClass("edit"),$("#iconMenu").attr("src","img/iconMenu.svg"),$("#favoritesEvent").fadeOut(300),$(".listFavorites").fadeIn(300),$("#favoritePicture").css("background-image","")}else{$(this).attr("src","img/iconMore.svg");var t=$("#favoritePicture").css("background-image"),a=$("#inputFavorite").val();numFav++;var i="";i+='<li data-number="'+numFav+'"><div class="img" style="background-image:'+t+'"></div><p>'+a+"</p></li>",$(".listFavorites ul").append(i);var o=$(".listFavorites ul").html();localStorage.setItem("misFavoritos",o),$("#favoritePicture").css("background-image",""),$("#inputFavorite").val(""),$(this).removeClass("active"),htmlFavorites=$(".favorites").html(),$("#iconMenu").removeClass("edit"),$("#iconMenu").attr("src","img/iconMenu.svg"),$("#favoritesEvent").fadeOut(300),$(".listFavorites").fadeIn(300),$("#favoritePicture").attr("src","")}}),$("#main").on("click","#takeLibrary",function(e){e.preventDefault(),$("header").removeClass("active");var t={quality:15,destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.PHOTOLIBRARY,allowEdit:!0,encodingType:0,targetWidth:780,targetHeight:780,saveToPhotoAlbum:!1,correctOrientation:!0};navigator.camera.getPicture(o,r,t)}),$("#main").on("click","#takeCamera",function(e){e.preventDefault(),$("header").removeClass("active");var t={quality:15,destinationType:Camera.DestinationType.DATA_URL,sourceType:Camera.PictureSourceType.CAMERA,allowEdit:!0,encodingType:0,targetWidth:780,targetHeight:780,saveToPhotoAlbum:!1,correctOrientation:!0};navigator.camera.getPicture(a,r,t)}),$("#main").on("click","#removeFavorite:not(.edit)",function(e){e.preventDefault(),$("header").removeClass("active"),$("#iconMore").attr("src","img/iconMore.svg"),$("#iconMore").removeClass("active"),$("#favoritePicture").css("background-image",""),$("#inputFavorite").val(""),$("#favoritesEvent").fadeOut(300),$(".listFavorites").fadeIn(300)}),$("#main").on("click","#removeFavorite.edit",function(e){e.preventDefault(),$("header").removeClass("active"),$("#iconMore").removeClass("active"),$("#iconMore").attr("src","img/iconMore.svg"),$(this).removeClass("edit"),$("#favoritePicture").css("background-image",""),$("#inputFavorite").val(""),$('.listFavorites li[data-number="'+favoritoActual+'"]').remove(),htmlFavorites=$(".favorites").html();var t=$(".listFavorites ul").html();localStorage.setItem("misFavoritos",t),$("#main.favorites nav #embedFavorite, #main.favorites nav #coverEmbed").css({display:"none"}),$("#favoritePicture").show(),$("#iconMenu").removeClass("edit"),$("#iconMenu").attr("src","img/iconMenu.svg"),$("#favoritesEvent").fadeOut(300),$(".listFavorites").fadeIn(300)}),$("#main").on("click",".listFavorites ul li",function(e){e.preventDefault(),$("header").removeClass("active"),$("#iconMenu").addClass("edit"),$("#iconMenu").attr("src","img/iconBack2.png"),$("#removeFavorite").attr("src","img/iconRemove.png"),$("#iconMore").attr("src","img/iconSave.svg"),$("#iconMore").addClass("active"),$("#removeFavorite").addClass("edit"),document.addEventListener("backbutton",function(e){e.preventDefault(),e.stopPropagation(),$("#iconMenu.edit").trigger("click")},!0),favoritoActual=$(this).attr("data-number");var t=$(this).find(".img").css("background-image");t=t.replace("url(",""),t=t.replace(")","");var a=$(this).find("p").text();dataColor=$(this).find(".img").data("color"),dataColor?($("#main.favorites nav #embedFavorite, #main.favorites nav #coverEmbed").css({opacity:0}),$("#main.favorites nav #embedFavorite, #main.favorites nav #coverEmbed").css({display:"block"}),$("#favoritePicture").hide(),$("#takeCamera, #takeLibrary").hide(),setTimeout(function(){$("#main.favorites nav #embedFavorite, #main.favorites nav #coverEmbed").css({opacity:1});var e=document.getElementById("embedFavorite").getSVGDocument().getElementsByTagName("path");$.each(e,function(t){e[t].style.setProperty("fill",dataColor,"")});var t=document.getElementById("embedFavorite").getSVGDocument().getElementsByTagName("circle");$.each(t,function(e){t[e].style.setProperty("fill",dataColor,"")});var a=document.getElementById("embedFavorite").getSVGDocument().getElementsByTagName("ellipse");$.each(a,function(e){a[e].style.setProperty("fill",dataColor,"")});var o=document.getElementById("embedFavorite").getSVGDocument().getElementsByTagName("rect");$.each(o,function(e){o[e].style.setProperty("fill",dataColor,"")}),dataColor=null},1e3)):($("#takeCamera, #takeLibrary").show(),$("#main.favorites nav #embedFavorite, #main.favorites nav #coverEmbed").css({display:"none"}),$("#favoritePicture").show()),$("#favoritePicture").css({"background-image":"url("+t+")","background-size":"cover"}),$("#embedFavorite").attr("src",t),$("#inputFavorite").val(a),$("#favoritesEvent").fadeIn(300),$(".listFavorites").fadeOut(300)}),$("#menu").on("click","#conversor:not(.active)",function(a){a.preventDefault(),e(),$("#iconMore").removeClass(),document.addEventListener("backbutton",function(e){e.preventDefault(),e.stopPropagation()},!0),setTimeout(function(){$("#main").removeClass(),$("#main").addClass("conversor divisas"),$("#main").html(htmlConversor),$("header h2").text("Conversor"),$("header #menu ul li").removeClass("active"),$("#conversor").addClass("active"),t()},600)}),$("#main").on("change","#change",function(){"currency"==$("#change").val()?($(".sizes").fadeOut(600),setTimeout(function(){$("#from, #fromCurrencyNumber, #to, #toCurrencyNumber, #dateCurrency").fadeIn(600)},600),$("#main").removeClass("tallas"),$("#main").addClass("divisas animate")):($("#from, #fromCurrencyNumber, #to, #toCurrencyNumber, #dateCurrency").fadeOut(600),setTimeout(function(){$(".sizes").fadeIn(600)},600),$("#main").addClass("tallas animate"),$("#main").removeClass("divisas"),$("#typeSize").trigger("change")),setTimeout(function(){$("#main").removeClass("animate")},500)}),$("#main").on("change","#fromCurrencyNumber",function(){var e=parseFloat(this.value.replace("/,/g",".")).toString().replace(/\B(?=(\d{3})+(?!\d))/g,""),t=parseFloat(this.value.replace("/,/g",".")).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,"");this.value=t;var a=$("#from").val(),o=$("#to").val(),i=JSON.parse(localStorage.getItem("rates")),r=i[a],n=1/r,c=e*n,l=i[o],s=l*c,u=s.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,"");u=$("#to option:selected").text()+" "+u.replace(".",","),$("#toCurrencyNumber").text(u),$("#dateCurrency").text(dateCurrency)}),$("#main").on("focus","#fromCurrencyNumber",function(){$(this).val(""),$("#toCurrencyNumber").text("")}),$("#main").on("focus blur change","#from, #to",function(){""!=$("#fromCurrencyNumber").val()&&"0"!=$("#fromCurrencyNumber")?$("#fromCurrencyNumber").trigger("change"):($("#fromCurrencyNumber").val("0"),$("#toCurrencyNumber").text("0"))}),$("#main").on("change","#typeSize",function(){var e,t,a=$(this).val();switch(a){case"zapatoMujer":e=calzado,t="talla_calzado_mujer";break;case"zapatoHome":e=calzado,t="talla_calzado_hombre";break;case"zapatoInfantil":e=calzado,t="talla_calzado_infantil";break;case"zapatoBebe":e=calzado,t="talla_calzado_bebe";break;case"textilMujer":e=textilM,t="talla_textil_mujer";break;case"textilHombreUp":e=textilHombreUp,t="talla_textil_hombre_superior";break;case"textilHombreDown":e=textilHombreDown,t="talla_textil_hombre_inferior";break;case"textilGirl":e=textilChildren,t="talla_textil_junior_chica";break;case"textilBoy":e=textilChildren,t="talla_textil_junior_chico";break;case"textilBaby":e=textilBebe,t="talla_textil_bebe"}for(var o="",i=0;i<e.length;i++)o+='<option value="'+i+'">'+e[i]+"</option>";$("#fromSize, #toSize").html(o),o="";for(var i=0;i<listaTallas.tallas[t].length;i++)o+='<option value="'+(i+1)+'">'+listaTallas.tallas[t][i][0]+"</option>";$("#fromSizeValue, #toSizeValue").html(o)}),$("#main").on("change","#fromSizeValue",function(){var e=$(this).val();$("#toSizeValue").val(e)}),$("#main").on("change","#fromSize",function(){var e=$(this).val(),t=$("#typeSize").val();switch(t){case"zapatoMujer":key=calzado,keyValue="talla_calzado_mujer";break;case"zapatoHome":key=calzado,keyValue="talla_calzado_hombre";break;case"zapatoInfantil":key=calzado,keyValue="talla_calzado_infantil";break;case"zapatoBebe":key=calzado,keyValue="talla_calzado_bebe";break;case"textilMujer":key=textilM,keyValue="talla_textil_mujer";break;case"textilHombreUp":key=textilHombreUp,keyValue="talla_textil_hombre_superior";break;case"textilHombreDown":key=textilHombreDown,keyValue="talla_textil_hombre_inferior";break;case"textilGirl":key=textilChildren,keyValue="talla_textil_junior_chica";break;case"textilBoy":key=textilChildren,keyValue="talla_textil_junior_chico";break;case"textilBaby":key=textilBebe,keyValue="talla_textil_bebe"}for(var a="",o=0;o<listaTallas.tallas[keyValue].length;o++)a+='<option value="'+(o+1)+'">'+listaTallas.tallas[keyValue][o][e]+"</option>";$("#fromSizeValue").html(a)}),$("#main").on("change","#toSize",function(){var e=$(this).val(),t=$("#typeSize").val();switch(t){case"zapatoMujer":key=calzado,keyValue="talla_calzado_mujer";break;case"zapatoHome":key=calzado,keyValue="talla_calzado_hombre";break;case"zapatoInfantil":key=calzado,keyValue="talla_calzado_infantil";break;case"zapatoBebe":key=calzado,keyValue="talla_calzado_bebe";break;case"textilMujer":key=textilM,keyValue="talla_textil_mujer";break;case"textilHombreUp":key=textilHombreUp,keyValue="talla_textil_hombre_superior";break;case"textilHombreDown":key=textilHombreDown,keyValue="talla_textil_hombre_inferior";break;case"textilGirl":key=textilChildren,keyValue="talla_textil_junior_chica";break;case"textilBoy":key=textilChildren,keyValue="talla_textil_junior_chico";break;case"textilBaby":key=textilBebe,keyValue="talla_textil_bebe"}for(var a="",o=0;o<listaTallas.tallas[keyValue].length;o++)a+='<option value="'+(o+1)+'">'+listaTallas.tallas[keyValue][o][e]+"</option>";$("#toSizeValue").html(a),$("#toSizeValue").val($("#fromSizeValue").val())});$("#menu").on("click","#geolocation:not(.active)",function(e){e.preventDefault(),$("#iconMore").removeClass(),$("header").removeClass("active"),document.addEventListener("backbutton",function(e){e.preventDefault(),e.stopPropagation()},!0),checkConnection()?navigator.geolocation.getCurrentPosition(c,l):noConnection()})}function checkConnection(){var e=navigator.connection.type,t={};return t[Connection.UNKNOWN]="Unknown connection",t[Connection.ETHERNET]="Ethernet connection",t[Connection.WIFI]="WiFi connection",t[Connection.CELL_2G]="Cell 2G connection",t[Connection.CELL_3G]="Cell 3G connection",t[Connection.CELL_4G]="Cell 4G connection",t[Connection.CELL]="Cell generic connection",t[Connection.NONE]="No network connection",conexion=t[e]!=t[Connection.NONE]?!0:!1}function noConnection(){function e(){}navigator.notification.confirm(messageDatos,e,noConexion,["OK"])}function onDeviceReady(){scrollDisable=!0,$(document).on("touchmove",function(e){scrollDisable&&e.preventDefault()}),navigator.globalization.getPreferredLanguage(function(e){function t(){listaTallas=JSON.parse(localStorage.getItem("listaTallas")),listaProductos=JSON.parse(localStorage.getItem("listaProductos")),listaMonedas=JSON.parse(localStorage.getItem("listaMonedas"));var t,a={};$.each(listaMonedas.divisas,function(e,o){a[o.divisa]=o.tipo,t=o.fecha});var o=JSON.stringify(a);localStorage.setItem("rates",o),localStorage.setItem("fechaCambio",t),datObj=JSON.parse(localStorage.getItem("rates"));var i,r=localStorage.getItem("fechaCambio");if(/es/.test(e.value)?(idioma="es",categoriesToSP(),htmlCategories=$("#main").html(),$('option[value="currency"]').text("Moneda"),$('option[value="size"]').text("Talla"),weekday=["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sábado"],monthname=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],i=parseInt(r.substring(8,10))+" de "+monthname[parseInt(r.substring(5,7))-1]+" de "+r.substring(0,4),dateCurrency="Datos actualizados el "+i,$("#dateCurrency").text(dateCurrency),$('option[value="zapatoMujer"]').text("Calzado mujer"),$('option[value="zapatoHome"]').text("Calzado hombre"),$('option[value="zapatoInfantil"]').text("Calzado infantil"),$('option[value="zapatoBebe"]').text("Calzado bebé"),$('option[value="textilMujer"]').text("Ropa mujer"),$('option[value="textilHombreUp"]').text("Camisa hombre"),$('option[value="textilHombreDown"]').text("Pantalón hombre"),$('option[value="textilGirl"]').text("Ropa niña"),$('option[value="textilBoy"]').text("Ropa niño"),$('option[value="textilBaby"]').text("Ropa bebé"),textilChildren=["Talla","Años","Altura"],textilHombreUp=["Pecho","Talla","Talla","Talla"],textilHombreDown=["Cintura","Talla","Talla","Talla"],textilM=["Pecho","Cintura","Cadera","Talla","Talla","Talla"],textilBebe=["Talla (cm)","Meses"],$("#inputFavorite").attr("placeholder","Descripción de tu nuevo favorito.")):(idioma="en",htmlCategories=$("#main").html(),i=monthname[parseInt(r.substring(5,7))-1]+" "+parseInt(r.substring(8,10))+", "+r.substring(0,4),dateCurrency="Mid-market rates: "+i,$("#dateCurrency").text(dateCurrency)),htmlConversor=$("#mainConversor").html(),$("#mainConversor").remove(),localStorage.getItem("misFavoritos")){var n=localStorage.getItem("misFavoritos");$(".listFavorites ul").html(n),numFav=$(".listFavorites li").length>0?$(".listFavorites li:last-child").attr("data-number"):0}else numFav=0;htmlFavorites=$("#mainFavoritos").html();var c=$("#favoritePicture").width();$("#favoritePicture").css({height:c});var c=$("#btnSubCategory").width();$("#btnSubCategory").css({height:c}),$("#mainFavoritos").remove(),$("header, #page-wrap, #main").fadeIn()}$.ajax({dataType:"json",async:!0,timeout:2e3,url:"http://shoptheworld.labstoreshopper.com/api/tallas/",success:function(e){localStorage.setItem("listaTallas",JSON.stringify(e))},error:function(){if(!localStorage.getItem("listaTallas")){var e=window.location.href.replace("index.html","");$.getJSON(e+"json/tallas.json",function(e){localStorage.setItem("listaTallas",JSON.stringify(e))})}}}).always(function(){$.ajax({dataType:"json",async:!0,timeout:2e3,url:"http://shoptheworld.labstoreshopper.com/api/productos/",success:function(e){localStorage.setItem("listaProductos",JSON.stringify(e))},error:function(){if(!localStorage.getItem("listaProductos")){var e=window.location.href.replace("index.html","");$.getJSON(e+"json/productos.json",function(e){localStorage.setItem("listaProductos",JSON.stringify(e))})}}}).always(function(){$.ajax({dataType:"json",async:!0,timeout:2e3,url:"http://shoptheworld.labstoreshopper.com/api/divisas/cambio/",success:function(e){localStorage.setItem("listaMonedas",JSON.stringify(e))},error:function(){if(!localStorage.getItem("listaMonedas")){var e=window.location.href.replace("index.html","");$.getJSON(e+"json/cambio.json",function(e){localStorage.setItem("listaMonedas",JSON.stringify(e))})}}}).always(function(){t()})})})},function(){}),initApp()}function categoriesToSP(){$("#home h1").html("la 1ªAPP que te permitirá <br/>comprar en todo el mundo"),$("#enter").text("COMENZAR"),$("h2").text("Categorías"),$('.btnCategory[data-category="Restaurant"]').attr("data-category","Restaurante"),$('.btnCategory[data-category="Toys"]').attr("data-category","Juguetes"),$('.btnCategory[data-category="Electronic"]').attr("data-category","Electrónica"),$('.btnCategory[data-category="Clothes"]').attr("data-category","Ropa"),$('.btnCategory[data-category="Sports"]').attr("data-category","Deportes"),$('.btnCategory[data-category="Travel"]').attr("data-category","Viajes"),$('.btnCategory[data-category="Baby"]').attr("data-category","Bebé"),$('.btnCategory[data-category="Drugstore"]').attr("data-category","Higiene"),$('.btnCategory[data-category="Food"]').attr("data-category","Comida"),$('option[value="subcategories"]').text("Subcategorías"),$('option[value="products"]').text("Productos"),$("#geolocation").text("Geolocalización"),$("#categories").text("Gategorías"),$("#favorites").text("Favoritos"),messageDatos="Es necesario disponer de acceso a internet. Inténtalo de nuevo más tarde.",noConexion="Sin conexión",messageFavoritos="Debes incluir al menos la imagen...",noFavoritos="¡Ops!",listaColores='<select id="color"><option value="#ffffff">Blanco</option><option value="#000000">Negro</option><option value="#ff0000">Rojo</option><option value="#a2c037">Verde Claro</option><option value="#289548">Verde Oscuro</option><option value="#009de0">Azul Claro</option><option value="#322b80">Azul Oscuro</option><option value="#f4f4f4">Gris Claro</option><option value="#4f4f4f">Gris Oscuro</option><option value="#e7b142">Naranja Claro</option><option value="#cd5b1c">Naranja Oscuro</option><option value="#5a287f">Morado</option><option value="#c4007a">Magenta</option><option value="#e06896">Rosa</option><option value="#ffed00">Amarillo</option><option value="#724f2b">Marrón</option></select>',done='<p id="doneProduct">¡OK!</p>'
}function capitalize(e){var t=e.charAt(0).toUpperCase()+e.slice(1);return t}function changeColor(e){var t=document.getElementById("embed").getSVGDocument().getElementsByTagName("path");$.each(t,function(a){t[a].style.setProperty("fill",e,"")});var a=document.getElementById("embed").getSVGDocument().getElementsByTagName("circle");$.each(a,function(t){a[t].style.setProperty("fill",e,"")});var o=document.getElementById("embed").getSVGDocument().getElementsByTagName("ellipse");$.each(o,function(t){o[t].style.setProperty("fill",e,"")});var i=document.getElementById("embed").getSVGDocument().getElementsByTagName("rect");$.each(i,function(t){i[t].style.setProperty("fill",e,"")})}var htmlCategories,htmlConversor,htmlFavorites,idioma,soperativo,myScroll,favoritoActual,numFav,listaTallas,listaProductos,listaMonedas,listaColores,currentTitle,done,dataColor,colorBefore,borderColor,currentCat,scrollDisable,currentPositionY,textSize='<p id="texSize"></p>';done='<p id="doneProduct">Done!</p>';var favoriteIcon='<img src="img/menuFavoritos.png" id="add2Favorite" alt="">';listaColores='<select id="color"><option value="#ffffff">White</option><option value="#000000">Black</option><option value="#ff0000">Red</option><option value="#a2c037">Light Green</option><option value="#289548">Dark Green</option><option value="#009de0">Light Blue</option><option value="#322b80">Dark Blue</option><option value="#f4f4f4">Light Gray</option><option value="#4f4f4f">Dark Gray</option><option value="#e7b142">Light Orange</option><option value="#cd5b1c">Dark Orange</option><option value="#5a287f">Violet</option><option value="#c4007a">Magenta</option><option value="#e06896">Pink</option><option value="#ffed00">Yellow</option><option value="#724f2b">Brown</option></select>';var tallas_tipos=["talla_calzado_hombre","talla_calzado_mujer","talla_calzado_infantil","talla_calzado_bebe","talla_textil_hombre_superior","talla_textil_hombre_inferior","talla_textil_mujer","talla_textil_junior_chica","talla_textil_junior_chico","talla_textil_bebe"],calzado=["US / Canada","UK","EURO","CM"],zapatoHome=new Array,zapatoMujer=new Array,zapatoInfantil=new Array,zapatoBebe=new Array,textilHombreUp=["Chest","Size","Size","Size"],textilHombreUp2=new Array,textilHombreDown=["Waist","Size","Size","Size"],textilHombreDown2=new Array,textilM=["Chest","Waist","Hip","Size","Size","Size"],textilMujer=new Array,textilChildren=["Size","Years","Height"],textilGirl=new Array,textilBoy=new Array,textilBebe=["Size (cm)","Months"],textilBaby=new Array,calzado=["US / Canada","UK","EURO","CM"],textilChildren=["Size","Years","Height"],textilHombreUp=["Chest","Size","Size","Size"],textilHombreDown=["Waist","Size","Size","Size"],textilM=["Chest","Waist","Hip","Size","Size","Size"],textilBebe=["Size (cm)","Months"],messageDatos="You must have internet access. Try again later.",noConexion="No internet",weekday=new Array("Sun","Mon","Tue","Wed","Thu","Fri","Sat"),monthname=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"),datosOpenexchangerates,dateCurrency,messageFavoritos="You must include the image...",noFavoritos="Ops!";$(document).ready(function(){document.addEventListener("deviceready",onDeviceReady,!1)});